<ion-view title="Request Detail" class="bg-lightgrey">

    <ion-content class="has-header bt-grey profile" scroll="true">

    <div class="card hybrid">
        <div class="item item-avatar item-text-wrap">
            <img ng-src="{{detail.photoProfile}}">
            <h2 class="lead text-medium">{{detail.employeeRequest.name}}</h2>
            <h3 class="text-smaller">{{detail.employeeRequest.assignment.positionName}}</h3>
            <p class="text-small">Grade :  {{detail.employeeRequest.assignment.gradeName}}</p>
        </div>
    </div>
    <div class="list">
        <div class="item item-text-wrap" >
            <p class="text-small">Request Type</p>
            <h2 class="lead text-medium" >{{detail.description}}</h2>
        </div>
        <div ng-if="detail.task == 'CHANGEMARITALSTATUS'">
                <div class="item item-text-wrap" >
                    <p class="text-small">Description</p>
                    <h2 class="lead text-medium" >{{detail.taskDescription}} </h2>
                </div>
                <div class="item item-text-wrap" >
                    <p class="text-small">Attachment</p>
                    <div class="row post" >
                        <div class="col" ng-repeat="items in detail.attachments" style="width:90px;height:90px" ><img width="90px" height="90px"  ng-src="{{items.image}}" ng-click="openImagePreview(items.image)" /></div>
                    </div>

                </div>
                
        </div>

        <div ng-if="detail.module == 'attendance'">
                <div class="list no-padding"  >
                      <div class="item item-icon-left text-small" href="#">
                        <i class="icon ion-ios-list-outline text-larger"></i>
                        <h2><b>{{detail.ref.categoryType}}</b></h2>
                        <p class="text-medium">{{detail.ref.details[0].typeDesc}}</p>
                      </div>
                      <div class="item item-icon-left text-small" href="#">
                        <i class="icon ion-android-calendar text-larger"></i>
                        {{detail.ref.startDate | date: 'dd MMM yyyy'}} - {{detail.ref.endDate | date: 'dd MMM yyyy'}}
                      </div>
                      <div class="item item-icon-left text-small" href="#" ng-if="detail.ref.categoryType=='Attendance Edit'">
                        <i class="icon ion-android-time text-larger"></i>
                        <p class="text-large">{{detail.ref.details[0].attendanceInTime |  date: 'HH:mm'}} <b>To</b> {{detail.ref.details[0].attendanceOutTime |  date: 'HH:mm'}}</p>
                      </div>
                      <div class="item item-icon-left text-small" href="#" ng-if="detail.ref.categoryType=='Overtime'">
                        
                        <p class="text-large"><b>In : </b> {{detail.ref.details[0].overtimeIn/ 60 | round:'':'down'}} hours {{detail.ref.details[0].overtimeIn % 60}} min <b>Out : </b>{{detail.ref.details[0].overtimeOut / 60 | round:'':'down'}} hours {{detail.ref.details[0].overtimeOut % 60}} min</p>
                      </div>
                      <div class="item item-icon-left text-small item-text-wrap" href="#">
                        <i class="icon ion-android-chat text-larger"></i>
                        <p class="text-medium">{{detail.ref.details[0].remark}}</p>
                      </div>

                      <div class="item item-icon-left text-small" href="#">
                        <i class="icon ion-ios-compose-outline text-larger"></i>
                        <p class="text-large"><b>Total : </b> {{detail.ref.details[0].totalWorkDay}} days</p>
                      </div>
                </div>
        </div>

        <div ng-if="detail.task == 'SUBMITFAMILY' || detail.task == 'CHANGEFAMILY'">
                <div class="item item-text-wrap" >
                     <p class="text-small">Name</p>
                    <h2 class="lead text-medium" >{{detail.ref.name}}</h2>

                </div>
                <div class="item item-text-wrap" >
                    <p class="text-small">Relation Type</p>
                    <h2 class="lead text-medium" >{{detail.ref.relationship}}</h2>
                    
                </div>
                <div class="row">
                  <button class="button button-medium  button-block button-outline button-positive" ng-click="viewMoreFamily()">View More</button>
                </div>
                 <div class="item item-text-wrap" >
                    <h2 class="talents">Attachment</h2>
                    <div class="row post" >
                        <div class="col" ng-repeat="items in detail.attachments" style="width:90px;height:90px" ><img width="90px" height="90px"  ng-src="{{items.image}}" ng-click="openImagePreview(items.image)" /></div>
                    </div>
                    <!-- 
                    <div class="col" style="min-height:90px"><a ng-click="gotoAddPhoto()"><img ng-src="{{attachment}}" height="90px" ></a></div>-->
                </div>
                
        </div>
        <!--<div ng-if="detail.task == 'SUBMITBENEFIT' || detail.task == 'SUBMITBENEFIT1'  || detail.task == 'SUBMITBENEFIT2' || detail.task == 'SUBMITBENEFIT3' || detail.task == 'SUBMITBENEFIT4' || detail.task == 'SUBMITBENEFIT5'">-->
        <div ng-if="detail.module == 'benefit'">
                <div class="item item-text-wrap" >
                    <p class="text-small">Category</p>
                    <h2 class="lead text-medium" >{{detail.ref.categoryType}}</h2>
                </div>
                <div class="list no-padding" ng-if="detail.ref.categoryType == 'Perjalanan Dinas' || detail.ref.categoryType == 'SPD Advance'" >
                      <div class="item item-icon-left text-small" href="#">
                        <i class="icon ion-location text-larger"></i>
                        {{detail.ref.origin}} - {{detail.ref.destination}}
                      </div>
                      <div class="item item-icon-left text-small" href="#">
                        <i class="icon ion-calendar text-larger"></i>
                        {{detail.ref.startDate | date: 'dd MMM yyyy'}} - {{detail.ref.endDate | date: 'dd MMM yyyy'}}
                      </div>
                      <div class="item item-icon-left text-small" href="#">
                        <i class="icon ion-ios-list-outline text-larger"></i>
                        {{detail.ref.spdType}}
                      </div>
                      <div class="item item-icon-left text-small" href="#">
                        <i class="icon ion-ios-compose-outline text-larger"></i>
                        {{detail.ref.remark}}
                      </div>
                </div>

                <div ng-if="detail.ref.categoryType != 'Medical Overlimit'" class="edit padding-horizontal" ng-repeat="obj in detail.ref.details">
                    <label class="item item-input" style="margin-bottom:0px">
                        <span class="input-label text-small">{{obj.type}}</span>
                        <input disabled type="text" value="Rp. {{obj.amount | number:0}}">
                        
                    </label>
                </div>
                <p ng-if="detail.ref.categoryType != 'Medical Overlimit'" class="text-medium padding uppercase">Total<span class="pull-right text-medium"> Rp.
                {{detail.ref.totalAmount | number:0}}</span></p>

                <p ng-if="detail.ref.categoryType != 'Medical Overlimit' && detail.ref.refRequestHeaderObj != null" class="text-medium padding uppercase">{{detail.ref.refRequestHeaderObj.categoryType}}<span class="pull-right text-medium"> Rp.
                {{detail.ref.refRequestHeaderObj.totalAmount | number:0}}</span></p>


                 <div class="item item-text-wrap" ng-if="detail.ref.categoryType != 'Medical Overlimit'">
                    <h2 class="talents">Attachment</h2>
                    <div class="row post" >
                        <div class="col" ng-repeat="items in detail.attachments" style="width:90px;height:90px" ><img width="90px" height="90px"  ng-src="{{items.image}}" ng-click="openImagePreview(items.image)" /></div>
                    </div>
                    
                </div>

                <div class="item item-text-wrap" ng-if="detail.ref.categoryType == 'Medical Overlimit' && detail.currentApprovalLevel > 0 && needApproval=='true'">
                    <h2 class="talents">Amount</h2>
                    <input  disabled ng-model="data.amount" ng-keyup="change($event,$index)" type="tel">
                </div>
                
        </div>
        <div ng-if="detail.task == 'SUBMITADDRESS' || detail.task == 'CHANGEADDRESS'">
                <div class="item item-text-wrap" >
                    <p class="text-small">Address</p>
                    <h2 class="lead text-medium" >{{detail.ref.address}} RT.{{detail.ref.rt}} RW.{{detail.ref.rw}} </h2>
                </div>
                <div class="item item-text-wrap" >
                    <p class="text-small">City</p>
                    <h2 class="lead text-medium" >{{detail.ref.city}}</h2>
                </div>
                <div class="item item-text-wrap" >
                    <p class="text-small">Province</p>
                    <h2 class="lead text-medium" >{{detail.ref.province}}</h2>
                </div>
                <div class="row">
                  <button class="button button-medium button-block button-outline button-positive" ng-click="viewMoreAddress()">View More</button>
                </div>
                 <div class="item item-text-wrap" >
                    <h2 class="talents">Attachment</h2>
                    <div class="row post" >
                        <div class="col" ng-repeat="items in detail.attachments" style="width:90px;height:90px" ><img width="90px" height="90px"  ng-src="{{items.image}}" ng-click="openImagePreview(items.image)" /></div>
                    </div>
                    
                </div>
                
        </div>
        
        <div class="row" ng-if= "needApproval == 'true'" >
                <button class="btn button-small  waves-effect waves-light button button-calm  button-block waves-effect waves-light" ng-click="confirmReject()">Reject</button>&nbsp;
                <button class="btn button-small waves-effect waves-light button button-balanced  button-block waves-effect waves-light" ng-click="confirmAccept()">Approve</button>

        </div>

    </div>
    
        
    </ion-content>
    <!--
    <ion-footer-bar class="bar-light" style="border-top:0px;height:50px;margin-bottom:2px" ng-if= "needApproval == 'true'" >
        <div class="col">
        <button class="btn button-small  waves-effect waves-light button button-calm  button-block waves-effect waves-light" ng-click="confirmReject()">Reject</button></div>
        <div class="col">
        <button class="btn button-small waves-effect waves-light button button-balanced  button-block waves-effect waves-light" ng-click="confirmAccept()">Approve</button>
        </div>

    </ion-footer-bar> -->
</ion-view>